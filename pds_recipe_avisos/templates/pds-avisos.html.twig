{# templates/pds-avisos.html.twig #}
{#
  Theme hook: pds_avisos
  Vars:
    - title: string
    - fondos: [
        { url?: string, title: string, description?: string },
        ...
      ]
    - icon_url: string
    - arrow_url: string
#}

{% set has_fondos = fondos is iterable and fondos|length > 0 %}

<section class="principal-avisos">
  <div class="container">
    {% if title %}
      <h2>{{ title }}</h2>
    {% endif %}

    <div class="principal-row-container">
      {% if has_fondos %}
        {% for item in fondos %}
          <article class="normativa-column">
            <span class="vinyeta" aria-hidden="true"></span>
            <div class="normativa-info">
              {% if item.title %}
                <h4>
                  {% if icon_url %}
                    <img class="normativa-info__icon" src="{{ icon_url }}" alt="" aria-hidden="true" />
                  {% endif %}
                  {{ item.title }}
                </h4>
              {% elseif icon_url %}
                <h4>
                  <img class="normativa-info__icon" src="{{ icon_url }}" alt="" aria-hidden="true" />
                </h4>
              {% endif %}

              {% if item.description %}
                <h3>{{ item.description }}</h3>
              {% endif %}

              {% if item.url is defined %}
                <div class="button-area">
                  <a
                    class="principal-link principal-link--subtle"
                    href="{{ item.url }}"
                    target="_blank"
                    rel="noopener"
                  >
                    <span>{{ 'Ir a detalle'|t }}</span>
                    {% if arrow_url %}
                      <img class="button-area__icon" src="{{ arrow_url }}" alt="" aria-hidden="true" />
                    {% endif %}
                  </a>
                </div>
              {% endif %}
            </div>
          </article>
        {% endfor %}
      {% else %}
        <p class="principal-avisos__empty">{{ 'No hay avisos disponibles.'|t }}</p>
      {% endif %}
    </div>
  </div>
</section>
