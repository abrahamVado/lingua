{#
  Variables expected:
  - title: string
  - years: array of strings, e.g. ['91','92',...,'25']
  - rows: array of:
      {
        person: { name: string, role: string },
        segments: [
          {
            width: number (percentage 0â€“100),
            first: bool,
            principal: bool,
            info: string (HTML-safe),
            img_src: string|null,
            img_alt: string|null
          },
          ...
        ]
      }
  - timeline_id: optional string id, default "principal-timeline"
#}

<section id="{{ timeline_id|default('principal-timeline') }}" class="principal-timeline">
  <div class="principal-timeline__container">
    <h2 class="principal-timeline__title">{{ title }}</h2>

    <div class="principal-timeline__viewport">
      <div class="principal-timeline__track">
        {% if years is not empty %}
          <div class="principal-timeline__years" aria-hidden="true">
            {% for y in years %}
              <span class="principal-timeline__year">{{ y }}</span>
            {% endfor %}
          </div>
        {% endif %}

        {% for row in rows %}
          <div class="principal-timeline__row">
            <div class="principal-timeline__person">
              <span class="principal-timeline__person-name">{{ row.person.name }}</span>
              <span class="principal-timeline__person-role">{{ row.person.role }}</span>
            </div>

            <div class="principal-timeline__jobs">
              {% for seg in row.segments %}
                {# classes #}
                {% set seg_classes = [
                  'principal-timeline__job-segment',
                  seg.first ? 'principal-timeline__job-segment--first' : '',
                  seg.principal ? 'principal-timeline__job-segment--principal' : ''
                ] %}

                <div class="{{ seg_classes|join(' ')|trim }}" style="width:{{ seg.width|default(0) }}%">
                  <span class="principal-timeline__job-info">
                    {{- seg.info|raw -}}
                    {% if seg.img_src %}
                      <img src="{{ seg.img_src }}" alt="{{ seg.img_alt|default('') }}">
                    {% endif %}
                  </span>
                  <div class="principal-timeline__job-segment-line"></div>
                </div>
              {% endfor %}
            </div>
          </div>
        {% endfor %}
      </div>

      <div class="principal-timeline__tooltip" id="{{ timeline_id|default('principal-timeline') }}-tooltip" role="tooltip" hidden></div>
    </div>
  </div>
</section>
