{#
  //1.- Renderizamos el contenedor principal del timeline y exponemos metadatos para integraciones JS.
#}
<section{{ attributes }}>
  {# //2.- Verificamos si existen elementos guardados en la receta para dibujar la línea de tiempo. #}
  {% if items is iterable and items|length > 0 %}
    <div class="principal-timeline__container">
      <h2 class="principal-timeline__title">Principais executivos</h2>
      <div class="principal-timeline__viewport">
        <div class="principal-timeline__track">
          {# //3.- Mantenemos la banda de años como guía visual independiente de los registros. #}
          <div class="principal-timeline__years" aria-hidden="true">
            <span class="principal-timeline__year">91</span><span class="principal-timeline__year">92</span><span class="principal-timeline__year">93</span><span class="principal-timeline__year">94</span><span class="principal-timeline__year">95</span>
            <span class="principal-timeline__year">96</span><span class="principal-timeline__year">97</span><span class="principal-timeline__year">98</span><span class="principal-timeline__year">99</span><span class="principal-timeline__year">00</span>
            <span class="principal-timeline__year">01</span><span class="principal-timeline__year">02</span><span class="principal-timeline__year">03</span><span class="principal-timeline__year">04</span><span class="principal-timeline__year">05</span>
            <span class="principal-timeline__year">06</span><span class="principal-timeline__year">07</span><span class="principal-timeline__year">08</span><span class="principal-timeline__year">09</span><span class="principal-timeline__year">10</span>
            <span class="principal-timeline__year">11</span><span class="principal-timeline__year">12</span><span class="principal-timeline__year">13</span><span class="principal-timeline__year">14</span><span class="principal-timeline__year">15</span>
            <span class="principal-timeline__year">16</span><span class="principal-timeline__year">17</span><span class="principal-timeline__year">18</span><span class="principal-timeline__year">19</span><span class="principal-timeline__year">20</span>
            <span class="principal-timeline__year">21</span><span class="principal-timeline__year">22</span><span class="principal-timeline__year">23</span><span class="principal-timeline__year">24</span><span class="principal-timeline__year">25</span>
          </div>
          {# //4.- Iteramos los elementos guardados para dibujar cada persona y sus datos asociados. #}
          {% for row in items %}
            <div class="principal-timeline__row" data-pds-template-row-index="{{ loop.index0 }}">
              <div class="principal-timeline__person">
                <span class="principal-timeline__person-name">{{ row.header }}</span>
                {% if row.subheader %}
                  <span class="principal-timeline__person-role">{{ row.subheader }}</span>
                {% endif %}
              </div>
              <div class="principal-timeline__jobs">
                {% set raw_segments = row.timeline_segments is iterable ? row.timeline_segments : [] %}
                {% set first_segment = raw_segments|length > 0 ? raw_segments|first : {} %}
                {% set interactive_segments = raw_segments|slice(1) %}
                {% if raw_segments|length > 0 %}
                  {% set show_anchor_label = raw_segments|length > 1 %}
                  <div class="principal-timeline__job-segment principal-timeline__job-segment--first" aria-hidden="true">
                    <span class="principal-timeline__job-segment-line" aria-hidden="true"></span>
                    <span class="principal-timeline__job-info">
                      {% if first_segment.year %}
                        <span class="principal-timeline__job-info-year">{{ first_segment.year }}</span>
                      {% endif %}
                      {% if first_segment.label and show_anchor_label %}
                        <span class="principal-timeline__job-info-text">{{ first_segment.label }}</span>
                      {% endif %}
                    </span>
                  </div>
                  {% if interactive_segments is empty %}
                    {% set interactive_segments = [first_segment] %}
                  {% endif %}
                  {% for segment in interactive_segments %}
                    <div class="principal-timeline__job-segment principal-timeline__job-segment--principal" data-pds-timeline-year="{{ segment.year }}">
                      <span class="principal-timeline__job-segment-line" aria-hidden="true"></span>
                      <span class="principal-timeline__job-info">
                        {% if segment.year %}
                          <span class="principal-timeline__job-info-year">{{ segment.year }}</span>
                        {% endif %}
                        {% if segment.label %}
                          <span class="principal-timeline__job-info-text">{{ segment.label }}</span>
                        {% endif %}
                        {% if row.description %}
                          <span class="principal-timeline__job-info-description">{{ row.description }}</span>
                        {% endif %}
                        {% if row.desktop_img %}
                          <span class="principal-timeline__job-info-logo">
                            <img src="{{ row.desktop_img }}" alt="{{ row.header }}" />
                          </span>
                        {% endif %}
                        {% if row.link %}
                          <span class="principal-timeline__job-info-link">
                            <a href="{{ row.link }}" rel="noopener noreferrer">{{ row.link }}</a>
                          </span>
                        {% endif %}
                      </span>
                    </div>
                  {% endfor %}
                {% else %}
                  <div class="principal-timeline__job-segment principal-timeline__job-segment--principal">
                    {% if row.description %}
                      <span class="principal-timeline__job-info">{{ row.description }}</span>
                    {% endif %}
                    {% if row.desktop_img %}
                      <span class="principal-timeline__job-info-logo">
                        <img src="{{ row.desktop_img }}" alt="{{ row.header }}" />
                      </span>
                    {% endif %}
                    {% if row.link %}
                      <span class="principal-timeline__job-info-link">
                        <a href="{{ row.link }}" rel="noopener noreferrer">{{ row.link }}</a>
                      </span>
                    {% endif %}
                  </div>
                {% endif %}
              </div>
            </div>
          {% endfor %}
        </div>
        {# //5.- Tooltip preparado para futuras integraciones JS del timeline dinámico. #}
        <div class="principal-timeline__tooltip" id="principalTimelineTooltip" role="tooltip" hidden></div>
      </div>
    </div>
  {% else %}
    {# //6.- Mensaje amigable cuando aún no hay ejecutivos configurados en Tab A. #}
    <div class="principal-timeline__empty">{{ 'Nenhum executivo cadastrado no momento.'|t }}</div>
  {% endif %}
</section>
