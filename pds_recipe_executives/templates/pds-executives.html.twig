{#
  Template: pds-executives.html.twig
  Renders a grid of executive cards + a reusable modal.

  Expected variables (set in block build() or preprocess):
    - executives: [
        {
          name: "Helder Soares",
          title: "Membro do Conselho...",
          linkedin: "https://…",
          photo_url: "https://…/foto.jpg",
          cv_html: [
            "<p>…</p>",
            "<p>…</p>"
          ]
        },
        ...
      ]

  JS behavior:
    - Your JS looks for .principal-executives__grid
    - Each .principal-executives__card must have:
        data-photo
        data-name
        data-title
        data-linkedin
      and contain a .principal-executives__cv with innerHTML it can inject.

  Accessibility:
    - Grid role="list"
    - Card role="listitem"
    - Modal role="dialog" aria-modal="true"
#}

<section class="principal-executives" aria-labelledby="principal-executives-title">
  <div class="principal-executives__inner">

    {# Grid of cards #}
    <div class="principal-executives__grid" role="list">

      {# Loop over dynamic executives list #}
      {% for exec in executives %}
        {#
          Defensive defaults. Prevents runtime notices if a field is missing.
        #}
        {% set photo   = exec.photo_url  | default('') %}
        {% set name    = exec.name       | default('') %}
        {% set title   = exec.title      | default('') %}
        {% set linkedin= exec.linkedin   | default('#') %}
        {% set cv_list = exec.cv_html    | default([]) %}

        <article class="principal-executives__card"
                 role="listitem"
                 data-photo="{{ photo }}"
                 data-name="{{ name }}"
                 data-title="{{ title }}"
                 data-linkedin="{{ linkedin }}">

          <button class="principal-executives__card-btn"
                  type="button"
                  aria-label="Ver currículo de {{ name }}">
            <span class="principal-executives__photo"
                  style="background-image:url('{{ photo|e('css') }}')"></span>
            <span class="principal-executives__name">{{ name }}</span>
          </button>

          {# Hidden CV payload for JS to copy into the modal #}
          <div class="principal-executives__cv u-visually-hidden">
            {# cv_html can be array-of-paragraphs or a single string #}

            {% if cv_list is iterable %}
              {% for block in cv_list %}
                {{ block|raw }}
              {% endfor %}
            {% else %}
              {{ cv_list|raw }}
            {% endif %}
          </div>
        </article>
      {% endfor %}

      {# Fallback if there are no executives yet #}
      {% if executives is empty %}
        <div class="principal-executives__empty">
          <p>Nenhum executivo cadastrado.</p>
        </div>
      {% endif %}

    </div>
  </div>
</section>

{# Modal component. JS will fill this when a card is clicked. #}
<div id="executive-modal"
     class="principal-modal"
     aria-hidden="true"
     role="dialog"
     aria-modal="true">
  <div class="principal-modal__overlay" data-close></div>

  <div class="principal-modal__dialog" role="document">
    <button class="principal-modal__close"
            type="button"
            aria-label="Fechar"
            data-close>&times;</button>

    <div class="principal-modal__content">
      <img class="principal-modal__photo" alt="" />
      <div class="principal-modal__text">
        <h3 class="principal-modal__name"></h3>
        <span class="principal-modal__title"></span>
        <div class="principal-modal__cv"></div>
        <div class="principal-modal__links">
          <a class="principal-modal__linkedin"
             href="#"
             target="_blank"
             rel="noopener">LinkedIn</a>
        </div>
      </div>
    </div>
  </div>
</div>
