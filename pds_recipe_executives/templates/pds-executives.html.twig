{#
  Theme hook: pds_executives
  Variables expected:
  - executives: array of items. Each item is:
      {
        photo: (string) absolute or theme-relative URL,
        name: (string),
        title: (string),
        linkedin: (string|nullable),
        cv_html: (string, HTML allowed)
      }
  - title: (string|optional) section heading
  - section_id: (string|optional) id attribute for the section
#}

{{ attach_library('pds_recipe_executives/executives') }}

<section class="principal-executives" aria-labelledby="{{ section_id|default('principal-executives-title') }}" id="{{ section_id|default('principal-executives') }}">
  <div class="principal-executives__inner">
    {% if title %}
      <h2 id="{{ section_id|default('principal-executives-title') }}" class="principal-executives__title">{{ title }}</h2>
    {% endif %}

    <div class="principal-executives__grid" role="list">
      {% for item in executives %}
        {# Defensive defaults #}
        {% set _photo = item.photo|default('') %}
        {% set _name  = item.name|default('') %}
        {% set _title = item.title|default('') %}
        {% set _lk    = item.linkedin|default('#') %}
        {% set _cv    = item.cv_html|default('') %}

        <article class="principal-executives__card" role="listitem"
          {% if _photo %}data-photo="{{ _photo }}"{% endif %}
          {% if _name %}data-name="{{ _name }}"{% endif %}
          {% if _title %}data-title="{{ _title }}"{% endif %}
          {% if _lk %}data-linkedin="{{ _lk }}"{% endif %}>
          <button class="principal-executives__card-btn" type="button" aria-label="{{ 'Ver currÃ­culo de'|t }} {{ _name }}">
            <span class="principal-executives__photo" {% if _photo %}style="background-image:url('{{ _photo }}')"{% endif %}></span>
            <span class="principal-executives__name">{{ _name }}</span>
          </button>

          <div class="principal-executives__cv u-visually-hidden">
            {{ _cv|raw }}
          </div>
        </article>
      {% endfor %}
    </div>
  </div>
</section>

{# Reusable modal #}
<div id="executive-modal" class="principal-modal" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="principal-modal__overlay" data-close></div>
  <div class="principal-modal__dialog" role="document">
    <button class="principal-modal__close" type="button" aria-label="{{ 'Fechar'|t }}" data-close>&times;</button>
    <div class="principal-modal__content">
      <img class="principal-modal__photo" alt="" />
      <div class="principal-modal__text">
        <h3 class="principal-modal__name"></h3>
        <span class="principal-modal__title"></span>
        <div class="principal-modal__cv"></div>
        <div class="principal-modal__links">
          <a class="principal-modal__linkedin" href="#" target="_blank" rel="noopener">LinkedIn</a>
        </div>
      </div>
    </div>
  </div>
</div>
